{"version":3,"file":"silkrouter.js","sources":["../../src/js/utils/constants.js","../../src/js/utils/assign.js","../../src/js/utils/libs.js","../../src/js/utils/params.js","../../src/js/utils/query.js","../../src/js/utils/vars.js","../../src/js/utils/utils.js","../../src/js/utils/deparam.js","../../src/js/utils/helpers.js","../../src/js/silkrouter.js"],"sourcesContent":["/**\n * Router constants\n */\nexport const HASH_CHANGE = 'hashchange';\nexport const POP_STATE = 'popstate';\nexport const ROUTE_CHANGED = 'route.changed';\nexport const REG_ROUTE_PARAMS = /:[^\\/]+/g;\nexport const REG_PATHNAME = /^\\/(?=[^?]*)/;\nexport const REG_HASH_QUERY = /\\?.+/;\nexport const REG_TRIM_SPECIALCHARS = /^([^a-zA-Z0-9]+)|([^a-zA-Z0-9]+)$/g;\nexport const INVALID_ROUTE = 'Route string is not a pure route';\nexport const CASE_INSENSITIVE_FLAG = '$$';","/* eslint-disable */\n\n/**\n * Inner loop function for assign\n * @private\n * @param {object} ref Argument object\n * @param {object} target First object\n */\nfunction loopFunc(ref, target) {\n    if (ref != null && typeof ref === 'object') {\n        Object.keys(ref).forEach(function (key) {\n            target[key] = ref[key];\n        });\n    }\n}\n\n/**\n * Polyfill for Object.assign only smaller and with less features\n * @private\n * @returns {object}\n */\nexport function assign() {\n    let i = 0;\n    const target = typeof arguments[0] !== 'object' || arguments[0] == null ? {} : arguments[0];\n    for (i = 1; i < arguments.length; i++) {\n        loopFunc(arguments[i], target);\n    }\n    return target;\n}\n/* eslint-enable */","import LZStorage from 'lzstorage';\nimport { assign } from './assign';\n\nconst store = new LZStorage({\n    compression: true\n});\n\n/**\n * Store library\n * @namespace libs\n * @type {object}\n * @private\n */\nexport const libs = {\n    /**\n     * Get's decompressed data from store\n     * @private\n     * @method getDataFromStore\n     * @memberof libs\n     * @param {string} path URL path\n     * @param {boolean} isHash Flag to determine if it's a pathname or hash\n     * @returns {*}\n     */\n    getDataFromStore(path, isHash) {\n        const paths = store.get('routeStore') || {};\n        return paths[`${isHash ? '#' : ''}${path}`];\n    },\n    /**\n     * @private\n     * @method setDataToStore\n     * @memberof libs\n     * @param {string} path URL path\n     * @param {boolean} isHash Flag to determine if it's a pathname or hash\n     * @param {any} data Data\n     * @returns {boolean}\n     */\n    setDataToStore(path, isHash, data) {\n        let paths = store.get('routeStore') || {};\n        if (paths[path]) {\n            if (\n                !data\n                || (\n                    typeof data === 'object'\n                    && Object.keys(data).length === 0\n                )\n            ) {\n                // Don't change existing data\n                return false;\n            }\n        }\n        const newPath = {};\n        newPath[`${isHash ? '#' : ''}${path}`] = data;\n        paths = assign({}, paths, newPath);\n        return store.set('routeStore', paths, true);\n    },\n    /**\n     * @namespace handlers\n     * @type {object[]}\n     * @private\n     */\n    handlers: []\n};","import { REG_ROUTE_PARAMS, REG_TRIM_SPECIALCHARS } from './constants';\n\n/**\n * Converts array like object to array\n * @param {any[]} arr Arraylike object\n */\nfunction toArray(arr) {\n    return Array.prototype.slice.call(arr);\n}\n\n/**\n * Parses current path and returns params object\n * @private\n * @param {string} expr Route expression\n * @param {string} path URL path\n * @returns {object}\n */\nexport function extractParams(expr, path = window.location.pathname) {\n    if (REG_ROUTE_PARAMS.test(expr)) {\n        const pathRegex = new RegExp(expr.replace(/\\//g, \"\\\\/\").replace(/:[^\\/\\\\]+/g, \"([^\\\\/]+)\"));\n        const params = {};\n        if (pathRegex.test(path)) {\n            REG_ROUTE_PARAMS.lastIndex = 0;\n            const keys = [].concat(toArray(expr.match(REG_ROUTE_PARAMS))).map(key => key.replace(REG_TRIM_SPECIALCHARS, ''));\n            const values = [].concat(toArray(path.match(pathRegex)));\n            values.shift();\n            keys.forEach((key, index) => {\n                params[key] = values[index];\n            });\n        }\n        return params;\n    }\n    return {};\n}","/**\n * Builds query string recursively\n * @private\n * @param {string[]} queryStringParts List of query string key value pairs\n * @param {*} key Key\n * @param {*} obj Value\n */\nfunction buildQueryString(queryStringParts, key, obj) {\n    if (obj && typeof obj === 'object') {\n        Object.keys(obj).forEach(obKey => {\n            buildQueryString(queryStringParts, `${key}[${obKey}]`, obj[obKey]);\n        });\n    } else if (['string', 'number', 'boolean', 'undefined', 'object'].indexOf(typeof obj) > -1) {\n        queryStringParts.push(`${key}=${obj}`);\n    }\n}\n\n/**\n * Converts an object to a query string\n * @private\n * @param {object} obj Object which should be converted to a string\n * @returns {string}\n */\nexport function toQueryString(obj) {\n    let queryStringParts = [];\n    if (obj && typeof obj === 'object') {\n        Object.keys(obj).forEach(key => {\n            buildQueryString(queryStringParts, key, obj[key]);\n        });\n        return queryStringParts.join('&');\n    } else if (typeof obj === 'string') {\n        return obj;\n    }\n    return '';\n}","export const loc = window.location;\n","/**\n * Shorthand for Array.isArray\n */\nexport const isArr = Array.isArray;\n\n/**\n * Safely trims string\n * @param {string} str String\n */\nexport function trim(str) {\n    return ((typeof str === 'string') ? str.trim() : '');\n}\n\n/**\n * Checks if input is a number\n * @param {*} key \n */\nexport function isNumber(key) {\n    key = trim(`${key}`);\n    if (['null', 'undefined', ''].indexOf(key) > -1) return false;\n    return !isNaN(Number(key));\n}\n\n/**\n * Checks if key is a true object\n * @param {*} key Any type of value\n */\nexport function isObject(key) {\n    return (key != null && !isArr(key) && key.toString() === \"[object Object]\");\n}\n\n/**\n * Sets default value\n * @param {*} value Any value\n * @param {*} defaultValue Default value if value is undefined\n */\nexport function setDefault(value, defaultValue) {\n    return typeof value === 'undefined' ? defaultValue : value;\n}","import { loc } from './vars';\nimport { isArr, trim, isNumber, isObject, setDefault } from './utils';\n\n/**\n * Checks if query parameter key is a complex notation\n * @param {string} q \n */\nfunction ifComplex(q) {\n    return (/\\[/.test(q));\n}\n\n/**\n * Converts query string to JavaScript object\n * @param {string} qs query string argument (defaults to url query string)\n */\nfunction deparam(qs, coerce) {\n    qs = trim(setDefault(qs, loc.search));\n    coerce = setDefault(coerce, true);\n    if (qs.charAt(0) === \"?\") {\n        qs = qs.replace(\"?\", \"\");\n    }\n    const queryParamList = qs.split(\"&\");\n    const queryObject = {};\n    if (qs) {\n        queryParamList.forEach((qq) => {\n            const qArr = qq.split(\"=\");\n            if (qArr[1]) {\n                qArr[1] = decodeURIComponent(qArr[1]);\n            }\n            if (ifComplex(qArr[0])) {\n                complex.apply(this, [].concat(qArr).concat([queryObject, coerce]));\n            } else {\n                simple.apply(this, [qArr, queryObject, false, coerce]);\n            }\n        });\n    }\n    return queryObject;\n}\n\n/**\n * Converts an array to an object\n * @param {array} arr \n */\nfunction toObject(arr) {\n    var convertedObj = {};\n    if (isArr(arr)) {\n        arr.forEach((value, index) => {\n            convertedObj[index] = value;\n        });\n    }\n    return convertedObj;\n}\n\n/**\n * Resolves an array to object if required\n * @param {array} ob An array object\n * @param {boolean} isNumber flag to test if next key is number\n */\nfunction resolve(ob, isNextNumber) {\n    if (typeof ob === \"undefined\") return isNextNumber ? [] : {};\n    return isNextNumber ? ob : toObject(ob);\n}\n\n/**\n * Resolves the target object for next iteration\n * @param {Object} ob current reference object\n * @param {string} nextProp reference property in current object\n */\nfunction resolveObj(ob, nextProp) {\n    if (isObject(ob)) return { ob };\n    if (isArr(ob) || typeof ob === \"undefined\") return { ob: resolve(ob, isNumber(nextProp)) };\n    return { ob: [ob], push: ob !== null };\n}\n\n/**\n * Handles complex query parameters\n * @param {string} key \n * @param {string} value \n * @param {Object} obj \n */\nfunction complex(key, value, obj, doCoerce) {\n    doCoerce = setDefault(doCoerce, true);\n    const match = key.match(/([^\\[]+)\\[([^\\[]*)\\]/) || [];\n    if (match.length === 3) {\n        let prop = match[1];\n        let nextProp = match[2];\n        key = key.replace(/\\[([^\\[]*)\\]/, \"\");\n        if (ifComplex(key)) {\n            if (nextProp === \"\") nextProp = \"0\";\n            key = key.replace(/[^\\[]+/, nextProp);\n            complex(key, value, (obj[prop] = resolveObj(obj[prop], nextProp).ob), doCoerce);\n        } else if (nextProp) {\n            const { ob, push } = resolveObj(obj[prop], nextProp);\n            obj[prop] = ob;\n            if (push) {\n                const tempObj = {};\n                tempObj[nextProp] = (doCoerce ? coerce(value) : value);\n                obj[prop].push(tempObj);\n            } else {\n                obj[prop][nextProp] = (doCoerce ? coerce(value) : value);\n            }\n        } else {\n            simple([match[1], value], obj, true);\n        }\n    }\n}\n\n/**\n * Handles simple query\n * @param {array} qArr \n * @param {Object} queryObject \n * @param {boolean} toArray \n */\nfunction simple(qArr, queryObject, toArray, doCoerce) {\n    doCoerce = setDefault(doCoerce, true);\n    let key = qArr[0];\n    let value = qArr[1];\n    if (doCoerce) {\n        value = coerce(value);\n    }\n    if (key in queryObject) {\n        queryObject[key] = isArr(queryObject[key]) ? queryObject[key] : [queryObject[key]];\n        queryObject[key].push(value);\n    } else {\n        queryObject[key] = toArray ? [value] : value;\n    }\n}\n\n/**\n * Restores values to their original type\n * @param {string} value undefined or string value\n */\nfunction coerce(value) {\n    if (value == null) return \"\";\n    if (typeof value !== \"string\") return value;\n    value = trim(value);\n    if (isNumber(value)) return +value;\n    switch (value) {\n        case \"null\": return null;\n        case \"undefined\": return undefined;\n        case \"true\": return true;\n        case \"false\": return false;\n        case \"NaN\": return NaN;\n        default: return value;\n    }\n}\n\n// Library encapsulation\nfunction lib() {\n    return deparam.apply(this, arguments);\n}\n\nexport default lib;","import { POP_STATE, HASH_CHANGE, ROUTE_CHANGED, INVALID_ROUTE, REG_HASH_QUERY, REG_PATHNAME, CASE_INSENSITIVE_FLAG } from './constants';\nimport { libs } from './libs';\nimport { extractParams } from './params';\nimport { toQueryString } from './query';\nimport { assign } from './assign';\nimport deparam from './deparam';\nimport { loc } from './vars';\nimport { isArr, trim } from './utils';\n\n/**\n * Triggers \"route.changed\" event\n * @private\n * @param {object} config Route event configuration\n * @param {object} config.originalEvent Original \"popstate\" event object\n * @param {string} config.route route string\n * @param {string} config.type Type of event\n * @param {boolean} config.hash Flag that determines type of event expected\n * @param {object} config.originalData Original data persisted by history API\n */\nfunction triggerRoute({ originalEvent, route, type, hash, originalData }) {\n    trigger(\n        ROUTE_CHANGED,\n        {\n            originalEvent,\n            route,\n            type,\n            hash\n        },\n        originalData\n    );\n}\n\n/**\n * Checks if given route is valid\n * @private\n * @param {string} route Route string\n */\nfunction isValidRoute(route) {\n    return ((typeof route === 'string') ? REG_PATHNAME.test(route) : false);\n}\n\n/**\n * Adds a query string\n * @private\n * @param {string} route Route string\n * @param {string} qString Query string\n * @param {boolean} appendQString Append query string flag\n */\nfunction resolveQuery(route, isHash, queryString, append) {\n    queryString = trim(queryString.substring((queryString.charAt(0) === '?' ? 1 : 0)));\n    if (!isHash) {\n        if (append) {\n            return `${route}${loc.search}${(queryString ? `&${queryString}` : '')}`;\n        }\n        return `${route}${(queryString ? `?${queryString}` : '')}`;\n    }\n    return `${loc.pathname}${loc.search}#${route}${queryString ? `?${queryString}` : ''}`;\n}\n\n/**\n * Converts current query string into an object\n * @private\n */\nfunction getQueryParams() {\n    const qsObject = deparam(loc.search, false);\n    let hashStringParams = {};\n    const hashQuery = loc.hash.match(REG_HASH_QUERY);\n    if (hashQuery) {\n        hashStringParams = assign({}, hashStringParams, deparam(hashQuery[0], false));\n    }\n    return assign({}, qsObject, hashStringParams);\n}\n\n/**\n * Set route for given view\n * @private\n * @param {string|object} oRoute Route string or object\n * @param {boolean} replaceMode Replace mode\n * @param {boolean} noTrigger Do not trigger handler\n */\nexport function execRoute(route, replaceMode, noTrigger) {\n    let routeObject = typeof route === 'string' ? { route } : assign({}, route);\n    routeObject = assign({}, routeObject, {\n        replaceMode,\n        noTrigger\n    });\n    const {\n        route: sroute,\n        replaceMode: rm,\n        noTrigger: nt,\n        queryString: qs = '',\n        data,\n        title = null,\n        appendQuery\n    } = routeObject;\n    if (typeof sroute === 'string') {\n        const isHash = sroute.charAt(0) === '#' ? 1 : 0;\n        const routeParts = trim(sroute).split('?');\n        let pureRoute = routeParts[0];\n        let queryString = trim(routeParts[1]);\n        const routeMethod = `${rm ? 'replace' : 'push'}State`;\n        queryString = toQueryString(queryString || qs);\n        pureRoute = pureRoute.substring(isHash);\n        if (isValidRoute(pureRoute)) {\n            libs.setDataToStore(pureRoute, isHash === 1, data);\n            const completeRoute = resolveQuery(pureRoute, isHash === 1, queryString, appendQuery);\n            history[routeMethod]({ data }, title, completeRoute);\n            if (!nt) {\n                triggerRoute(\n                    {\n                        originalEvent: {},\n                        route: `${isHash ? '#' : ''}${pureRoute}`,\n                        type: (isHash ? HASH_CHANGE : POP_STATE),\n                        hash: (isHash === 1),\n                        originalData: {}\n                    }\n                );\n            }\n        } else {\n            throw new Error(INVALID_ROUTE);\n        }\n    }\n}\n\n/**\n * Binds generic route if route is passed as a list of URLs\n * @private\n * @param {string[]} route Array of routes\n * @param {*} handler Handler function\n */\nfunction bindGenericRoute(route, handler) {\n    if (libs.handlers.filter(ob => (ob.prevHandler === handler)).length) {\n        return;\n    }\n    bindRoute((...args) => {\n        if (typeof handler === 'function') {\n            const [e] = args;\n            let compareRoute = e.route;\n            if (compareRoute.charAt(0) === '#') {\n                compareRoute = compareRoute.substring(1);\n            }\n            if (route.indexOf(compareRoute) > -1) {\n                handler.apply(this, args);\n            } else if (\n                route.indexOf(`#${compareRoute}`) > -1\n                && e.hash\n            ) {\n                handler.apply(this, args);\n            }\n        }\n    }, handler);\n}\n\n/**\n * Attaches a route handler function\n * @private\n * @param {string} route Route string\n * @param {function} handler Callback function\n */\nexport function bindRoute(route, handler, prevHandler) {\n    // Resolve generic route\n    let isCaseInsensitive = false;\n    if (typeof route === 'function') {\n        prevHandler = handler;\n        handler = route;\n        route = '*';\n    }\n    if (isArr(route)) {\n        bindGenericRoute(route, handler);\n        return;\n    }\n    if (route.indexOf(CASE_INSENSITIVE_FLAG) === 0) {\n        isCaseInsensitive = true;\n        route = route.substring(CASE_INSENSITIVE_FLAG.length);\n    }\n    const startIndex = route.charAt(0) === '#' ? 1 : 0;\n    route = route.substring(startIndex);\n    // Check existence\n    const exists = libs.handlers.filter(ob => (ob.handler === handler && ob.route === route)).length;\n    // Attach handler\n    if (!exists && typeof handler === 'function') {\n        libs.handlers.push({\n            eventName: ROUTE_CHANGED,\n            handler,\n            prevHandler,\n            route,\n            hash: startIndex === 1,\n            isCaseInsensitive\n        });\n    }\n    // Execute handler if matches current route (Replaces init method in version 2.0)\n    const { pathname, hash } = loc;\n    const paths = startIndex === 1 ? [hash] : [pathname, hash];\n    paths.filter(path => trim(path)).forEach(currentPath => {\n        let cRoute = route;\n        let cCurrentPath = currentPath;\n        if (isCaseInsensitive) {\n            cRoute = cRoute.toLowerCase();\n            cCurrentPath = cCurrentPath.toLowerCase();\n        }\n        const pathIndex = currentPath.charAt(0) === '#' ? 1 : 0;\n        const { hasMatch, data, params } = testRoute(cRoute, cCurrentPath);\n        if (hasMatch && typeof handler === 'function') {\n            handler({\n                route: currentPath,\n                hash: pathIndex === 1,\n                eventName: pathIndex === 1 ? HASH_CHANGE : POP_STATE,\n                data,\n                params,\n                query: getQueryParams(),\n                isCaseInsensitive\n            });\n        }\n    });\n}\n\n/**\n * Unbinds route handlers\n * @private\n * @param {string} route Route string\n * @param {function} handler Callback function\n */\nexport function unbindRoute(...args) {\n    let [route, handler] = args;\n    const prevLength = libs.handlers.length;\n    let isRouteList = false;\n    if (args.length === 0) {\n        libs.handlers.length = 0;\n    }\n    if (isArr(route)) {\n        route = '*';\n        isRouteList = true;\n    }\n    libs.handlers = libs.handlers.filter(ob => {\n        if (args.length === 1 && typeof args[0] === 'string' && !isRouteList) {\n            return ob.route !== route;\n        }\n        // Check for generic route\n        if (args.length === 1 && typeof args[0] === 'function') {\n            handler = args[0];\n            route = '*'; // Generic route\n        }\n        return !(ob.route === route && (\n            ob.handler === handler\n            || ob.prevHandler === handler\n        ));\n    });\n    return (prevLength > libs.handlers.length);\n}\n\n\n/**\n * Compares route with current URL\n * @private\n * @param {string} route Route string\n * @param {string} url Current url\n * @param {object} params Parameters\n */\nfunction testRoute(route, url, originalData) {\n    originalData = assign(originalData);\n    const isHash = url.charAt(0) === '#';\n    if (isHash) {\n        url = url.substring(1);\n    }\n    const path = url.split('?')[0];\n    if (!!Object.keys(originalData).length) {\n        libs.setDataToStore(path, isHash, originalData); // Sync store with event data.\n    }\n    const data = libs.getDataFromStore(path, isHash);\n    const params = extractParams(route, url);\n    let hasMatch = Object.keys(params).length > 0 || (\n        isValidRoute(url) && ((route === url) || (route === '*'))\n    );\n    return {\n        hasMatch,\n        data,\n        params\n    };\n}\n\n/**\n * Triggers a router event\n * @private\n * @param {string} eventName Name of route event\n * @param {object} params Parameters\n */\nfunction execListeners(eventName, routeConfig, originalData) {\n    originalData = assign(originalData);\n    const { hash: isHash } = routeConfig;\n    const { hash, pathname } = loc;\n    libs.handlers.forEach(ob => {\n        if (ob.eventName === eventName) {\n            let cRoute = ob.route;\n            let cCurrentPath = (isHash ? hash : pathname);\n            if (ob.isCaseInsensitive) {\n                cRoute = cRoute.toLowerCase();\n                cCurrentPath = cCurrentPath.toLowerCase();\n            }\n            const { hasMatch, data, params } = testRoute(\n                cRoute,\n                cCurrentPath,\n                originalData\n            );\n            if (hasMatch && (!ob.hash || (ob.hash && isHash))) {\n                ob.handler(assign({}, routeConfig, {\n                    data,\n                    params,\n                    query: getQueryParams()\n                }));\n            }\n        }\n    });\n}\n\n/**\n * Internal method to trigger a routing event\n * @private\n */\nexport function trigger(...args) {\n    return execListeners.apply(this, args);\n}\n\n/**\n * Initializes router events\n * @private\n */\nexport function initRouterEvents() {\n    window.addEventListener(`${POP_STATE}`, function (e) {\n        const completePath = `${loc.pathname}${loc.hash}`;\n        const pathParts = completePath.split('#');\n        const pathname = pathParts[0];\n        const hashstring = pathParts[1];\n        let originalData = {};\n        if (e.state) {\n            const { data } = e.state;\n            if (data) {\n                originalData = data;\n            }\n        }\n        triggerRoute({\n            originalEvent: e,\n            route: pathname,\n            type: e.type,\n            hash: false,\n            originalData\n        });\n        if (hashstring) {\n            triggerRoute({\n                originalEvent: e,\n                route: `#${hashstring}`,\n                type: HASH_CHANGE,\n                hash: true,\n                originalData\n            });\n        }\n    });\n}","import { execRoute, bindRoute, unbindRoute, initRouterEvents, trigger } from './utils/helpers';\nimport { extractParams } from './utils/params';\nimport { CASE_INSENSITIVE_FLAG } from './utils/constants';\nimport { toQueryString } from './utils/query';\nimport deparam from './utils/deparam';\n\n/**\n * @namespace router\n * @public\n * @type {object}\n */\nconst router = {\n    /**\n     * @namespace api\n     * @memberof router\n     * @type {object}\n     */\n    api: {\n        /**\n         * Triggers a custom route event\n         * @method trigger\n         * @public\n         * @memberof router.api\n         * @param {...*} arguments\n         */\n        trigger(...args) {\n            return trigger.apply(this, args);\n        },\n        /**\n         * Extract parameters as an object if route has parameters\n         * @method extractParams\n         * @public\n         * @memberof router.api\n         * @params {...*} arguments\n         */\n        extractParams(...args) {\n            return extractParams.apply(this, args);\n        },\n        /**\n         * Converts object to query string\n         * @method toQueryString\n         * @public\n         * @memberof router.api\n         * @params {...*} arguments\n         */\n        toQueryString(...args) {\n            return toQueryString.apply(this, args);\n        },\n        /**\n         * Converts object to query string\n         * @method fromQueryString\n         * @public\n         * @memberof router.api\n         * @params {...*} arguments\n         */\n        fromQueryString(...args) {\n            return deparam.apply(this, args);\n        }\n    },\n    /**\n     * Sets a route url\n     * @public\n     * @param {string|object} route Route object or URL\n     * @param {boolean} replaceMode Flag to enable replace mode\n     * @param {boolean} noTrigger Flag to disable handler while changing route\n     */\n    set(...args) {\n        return execRoute.apply(this, args);\n    }\n}\n\n/**\n * Attaches a route handler\n * @public\n * @param {string|function} route Route string or handler function (in case of generic route)\n * @param {function} handler Handler function\n */\nfunction route(...args) {\n    return bindRoute.apply(this, args);\n}\n\n/**\n * Attaches case insensitive route handler\n * @public\n * @param {string|function} route Route string or handler function (in case of generic route)\n * @param {function} handler Handler function\n */\nfunction routeIgnoreCase(firstArg, ...args) {\n    if (typeof firstArg === 'string') {\n        route.apply(this, [`${CASE_INSENSITIVE_FLAG}${firstArg}`, ...args]);\n    }\n}\n\n/**\n * Detaches a route handler\n * @public\n * @param {string|function} route Route string or handler function (in case of generic route)\n * @param {function} handler Handler function\n */\nfunction unroute(...args) {\n    return unbindRoute.apply(this, args);\n}\n\ninitRouterEvents();\n\nexport {\n    router,\n    route,\n    routeIgnoreCase,\n    unroute,\n    deparam,\n    toQueryString as param\n};"],"names":["HASH_CHANGE","POP_STATE","ROUTE_CHANGED","REG_ROUTE_PARAMS","REG_PATHNAME","REG_HASH_QUERY","REG_TRIM_SPECIALCHARS","INVALID_ROUTE","CASE_INSENSITIVE_FLAG","loopFunc","ref","target","Object","keys","forEach","key","assign","i","arguments","length","store","LZStorage","compression","libs","getDataFromStore","path","isHash","paths","get","setDataToStore","data","newPath","set","handlers","toArray","arr","Array","prototype","slice","call","extractParams","expr","window","location","pathname","test","pathRegex","RegExp","replace","params","lastIndex","concat","match","map","values","shift","index","buildQueryString","queryStringParts","obj","obKey","indexOf","push","toQueryString","join","loc","isArr","isArray","trim","str","isNumber","isNaN","Number","isObject","toString","setDefault","value","defaultValue","ifComplex","q","deparam","qs","coerce","search","charAt","queryParamList","split","queryObject","qq","qArr","decodeURIComponent","complex","apply","simple","toObject","convertedObj","resolve","ob","isNextNumber","resolveObj","nextProp","doCoerce","prop","tempObj","undefined","NaN","lib","triggerRoute","originalEvent","route","type","hash","originalData","trigger","isValidRoute","resolveQuery","queryString","append","substring","getQueryParams","qsObject","hashStringParams","hashQuery","execRoute","replaceMode","noTrigger","routeObject","sroute","rm","nt","title","appendQuery","routeParts","pureRoute","routeMethod","completeRoute","history","Error","bindGenericRoute","handler","filter","prevHandler","bindRoute","args","e","compareRoute","isCaseInsensitive","startIndex","exists","eventName","currentPath","cRoute","cCurrentPath","toLowerCase","pathIndex","testRoute","hasMatch","query","unbindRoute","prevLength","isRouteList","url","execListeners","routeConfig","initRouterEvents","addEventListener","completePath","pathParts","hashstring","state","router","api","fromQueryString","routeIgnoreCase","firstArg","unroute"],"mappings":"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"}
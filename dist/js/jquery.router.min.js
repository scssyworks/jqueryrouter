!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("deparam.js")):"function"==typeof define&&define.amd?define(["exports","jquery","deparam.js"],e):e((t=t||self).jqueryrouter={},t.jQuery,t.deparam)}(this,function(t,e,n){"use strict";function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},e=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(t){var e,a,n;e=r,n=o[a=t],a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n})}return r}e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n;var o={handlers:[]},p=history&&history.pushState,f={noTrigger:!1},u={pathname:/^\/(?=[^?]*)/,routeparams:/:[^\/]+/g,hashQuery:/\?.+/},y={routeChanged:"routeChanged",hashchange:"hashchange",popstate:"popstate"},h={invalidPath:"Path is invalid"};function i(t){return Array.prototype.slice.call(t)}function l(t){return null!==t&&"object"===d(t)?t:{}}function a(t,e){var a=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(f.noTrigger&&e===y.hashchange)f.noTrigger=!1;else{f.data=l(f.data);var r=f.data.data=l(f.data.data),o={eventType:e,hash:!!a,route:t,isInit:n};f.data.data=c({},r,o),v.events.trigger(y.routeChanged,f.data)}}function s(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=n(window.location.search,t),a={};return window.location.hash.match(u.hashQuery)&&(a=n(window.location.hash.match(u.hashQuery)[0],t)),c({},e,a)}function g(t,e,a){if("string"==typeof(i=t)&&u.pathname.test(i))return n=t,o=a,(r=e)||o?"string"==typeof r?(r=r.trim())&&o?n+window.location.search+"&"+r.replace("?",""):r?n+"?"+r.replace("?",""):n:void 0:n;var n,r,o,i;!function(t){throw new Error(t)}(h.invalidPath)}function w(t){return t.replace(/^([^a-zA-Z0-9]+)|([^a-zA-Z0-9]+)$/g,"")}function m(t,e,a){if(~e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),u.routeparams.lastIndex=0,!u.routeparams.test(t))return t===e||"*"===t;a.params={};var n=new RegExp(t.replace(/\//g,"\\/").replace(/:[^\/\\]+/g,"([^\\/]+)"));if(n.test(e)){u.routeparams.lastIndex=0;var r=i(t.match(u.routeparams)).map(w),o=i(e.match(n));return o.shift(),r.forEach(function(t,e){a.params[t]=o[e]}),!0}return!1}var r,v={events:c({},y,{trigger:function(t,e){return function(e,a){(a=l(a)).data=l(a.data);var t=a.data,n=t.hash,r=t.isInit;o.handlers.forEach(function(t){t.eventName===e&&(!p||n||!m(t.route,window.location.pathname,a)||r&&t.called?n&&(window.location.hash||p||!m(t.route,window.location.pathname,a)?!m(t.route,window.location.hash.substring(1),a)||r&&t.hashCalled||(t.hashCalled=!0,t.handler(a.data,a.params,s(!1))):(f.data=a.data,window.location.replace("#"+window.location.pathname))):(t.called=!0,t.handler(a.data,a.params,s(!1))))})}.apply(this,[t,e])}}),init:function(){var t={eventType:p?y.popstate:y.hashchange,hash:!p,route:p?window.location.pathname:window.location.hash,isInit:!0};this.events.trigger(y.routeChanged,{data:t}),window.location.hash&&e(window).trigger(y.hashchange,[!0])},set:function(){return function(t,e,a){if(t){var n=null,r="",o="",i=!1,u=!1,h=e?"replaceState":"pushState";if(f.noTrigger=a,"object"===d(t)?(f.data={data:t.data},n=t.title,r=t.route,o=t.queryString,i=t.appendQuery):"string"==typeof t&&(f.data={data:{}},r=t),"#"===r.charAt(0)&&(u=!0,r=r.replace("#","")),p&&!u){if(history[h](f.data,n,g(r,o,i)),!a){var l={eventType:y.popstate,hash:!1,route:r},s=f.data.data;f.data.data=c({},s,l),v.events.trigger(y.routeChanged,f.data)}}else e?window.location.replace("#"+g(r,o,i)):window.location.hash=g(r,o,i)}}.apply(this,arguments)},historySupported:p};function b(){return function(a,n){var r=this;"function"==typeof a&&(n=a,a="*"),o.handlers.filter(function(t){var e=t.originalHandler===n&&t.route===a;return r&&(e=e&&t.element===r),e}).length||o.handlers.push({eventName:y.routeChanged,originalHandler:n,handler:n.bind(this),element:this,route:a})}.apply(this,arguments)}function j(){return function(e,a){var n=arguments.length;0===n.length&&(o.handlers.length=0),o.handlers=o.handlers.filter(function(t){return 1===n.length&&"string"==typeof n[0]?t.route!==e:(1===n.length&&"function"==typeof n[0]&&(a=n[0],e="*"),!(t.route===e&&t.handler===a))})}.apply(this,arguments)}"function"==typeof e&&(e.route=e.prototype.route=b,e.unroute=e.prototype.unroute=j,e.router=v),(r=e(window)).on(y.popstate,function(t){a.apply(this,[window.location.pathname,t.type])}),r.on(y.hashchange,function(t,e){a.apply(this,[window.location.hash,t.type,!0,e])}),t.router=v,t.route=b,t.unroute=j,Object.defineProperty(t,"__esModule",{value:!0})});

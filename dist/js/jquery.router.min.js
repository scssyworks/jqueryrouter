!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("deparam.js")):"function"==typeof define&&define.amd?define(["exports","jquery","deparam.js"],e):e((t=t||self).jqueryrouter={},t.jQuery,t.deparam)}(this,function(t,e,r){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e=e&&e.hasOwnProperty("default")?e.default:e,r=r&&r.hasOwnProperty("default")?r.default:r;var o={handlers:[]},p=history&&history.pushState,c=window.location,d={noTrigger:!1},h={pathname:/^\/(?=[^?]*)/,routeparams:/:[^\/]+/g,hashQuery:/\?.+/},l={routeChanged:"routeChanged",hashchange:"hashchange",popstate:"popstate"},n={invalidPath:"Path is invalid"};function u(e,a){null!=e&&"object"===s(e)&&Object.keys(e).forEach(function(t){a[t]=e[t]})}function f(t){var e=0,a="object"!==s(t)||null==t?{}:t;for(e=1;e<arguments.length;e++)u(arguments[e],a);return a}function i(t){return Array.prototype.slice.call(t)}function a(t,e){var a=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(d.noTrigger&&e===l.hashchange)d.noTrigger=!1;else{d.data=f(d.data);var r=d.data.data=f(d.data.data);d.data.data=f({},r,{eventType:e,hash:!!a,route:t,isInit:n}),j.events.trigger(l.routeChanged,d.data)}}function y(t){var e=!(0<arguments.length&&void 0!==t)||t,a=r(c.search,e),n={};return c.hash.match(h.hashQuery)&&(n=r(c.hash.match(h.hashQuery)[0],e)),f({},a,n)}function g(t,e,a){if(function(t){return"string"==typeof t&&h.pathname.test(t)}(t))return function(t,e,a){return e||a?"string"==typeof e?(e=e.trim())&&a?"".concat(t).concat(c.search,"&").concat(e.replace("?","")):e?"".concat(t,"?").concat(e.replace("?","")):t:void 0:t}(t,e,a);throw new TypeError(n.invalidPath)}function m(t){return t.replace(/^([^a-zA-Z0-9]+)|([^a-zA-Z0-9]+)$/g,"")}function v(t,e,a){if(~e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),h.routeparams.lastIndex=0,!h.routeparams.test(t))return t===e||"*"===t;a.params={};var n=new RegExp(t.replace(/\//g,"\\/").replace(/:[^\/\\]+/g,"([^\\/]+)"));if(n.test(e)){h.routeparams.lastIndex=0;var r=i(t.match(h.routeparams)).map(m),o=i(e.match(n));return o.shift(),r.forEach(function(t,e){a.params[t]=o[e]}),!0}return!1}var b,j={events:f({trigger:function(t,e){return function(e,a){(a=f(a)).data=f(a.data);var t=a.data,n=t.hash,r=t.isInit;o.handlers.forEach(function(t){t.eventName===e&&(!p||n||!v(t.route,c.pathname,a)||r&&t.called?n&&(c.hash||p||!v(t.route,c.pathname,a)?!v(t.route,c.hash.substring(1),a)||r&&t.hashCalled||(t.hashCalled=!0,t.handler(a.data,a.params,y(!1))):(d.data=a.data,c.replace("#"+c.pathname))):(t.called=!0,t.handler(a.data,a.params,y(!1))))})}.apply(this,[t,e])}},l),init:function(){var t={eventType:p?l.popstate:l.hashchange,hash:!p,route:p?c.pathname:c.hash,isInit:!0};this.events.trigger(l.routeChanged,{data:t}),c.hash&&e(window).trigger(l.hashchange,[!0])},set:function(){return function(t,e,a){if(t){var n=null,r="",o="",h=!1,u=!1,i=e?"replaceState":"pushState";d.noTrigger=a,"object"===s(t)?(d.data={data:t.data},n=t.title,r=t.route,o=t.queryString,h=t.appendQuery):"string"==typeof t&&(d.data={data:{}},r=t),"#"===r.charAt(0)&&(u=!0,r=r.replace("#","")),p&&!u?(history[i](d.data,n,g(r,o,h)),a||(d.data.data=f({},d.data.data,{eventType:l.popstate,hash:!1,route:r}),j.events.trigger(l.routeChanged,d.data))):e?c.replace("#"+g(r,o,h)):c.hash=g(r,o,h)}}.apply(this,arguments)},historySupported:p};function w(){return function(a,n){var r=this;"function"==typeof a&&(n=a,a="*"),o.handlers.filter(function(t){var e=t.originalHandler===n&&t.route===a;return r&&(e=e&&t.element===r),e}).length||o.handlers.push({eventName:l.routeChanged,originalHandler:n,handler:n.bind(this),element:this,route:a})}.apply(this,arguments)}function S(){return function(e,a){var n=arguments.length;0===n.length&&(o.handlers.length=0),o.handlers=o.handlers.filter(function(t){return 1===n.length&&"string"==typeof n[0]?t.route!==e:(1===n.length&&"function"==typeof n[0]&&(a=n[0],e="*"),!(t.route===e&&t.handler===a))})}.apply(this,arguments)}"function"==typeof e&&(e.route=e.prototype.route=w,e.unroute=e.prototype.unroute=S,e.router=j),(b=e(window)).on(l.popstate,function(t){a.apply(this,[c.pathname,t.type])}),b.on(l.hashchange,function(t,e){a.apply(this,[c.hash,t.type,!0,e])}),t.route=w,t.router=j,t.unroute=S,Object.defineProperty(t,"__esModule",{value:!0})});

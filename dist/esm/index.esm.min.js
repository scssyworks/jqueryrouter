/**!
 * Router plugin for single page applications with routes
 * Released under MIT license
 * @name Silk router
 * @author Sachin Singh <contactsachinsingh@gmail.com>
 * @version 3.4.3
 * @license MIT
 */
const t="hashchange",e="popstate",n="route.changed",o=/:[^\/]+/g,a=/^\/(?=[^?]*)/,i=/\?.+/,r="Route string is not a pure route",c="$$",s=Array.isArray;function l(t){return"string"==typeof t?t.trim():""}function u(t){return t=l(`${t}`),!(["null","undefined",""].indexOf(t)>-1)&&!isNaN(+t)}function p(t){return t&&"object"==typeof t}function h(t){return p(t)&&!s(t)}function f(t,e){return void 0===t?e:t}function d(t){return Array.prototype.slice.call(t)}function _(t){return"string"==typeof t&&a.test(t)}function x(t){return"string"==typeof t&&"#"===t.charAt(0)}function v(t){return"function"==typeof t}function g(t,e){return{type:t,state:{data:e}}}function y(t){return t?Object.keys(t):[]}const m=window.location;function w(t,e){e=f(e,m.pathname);const n={};if(o.test(t)){const a=new RegExp(t.replace(/\//g,"\\/").replace(/:[^\/\\]+/g,"([^\\/]+)"));if(o.lastIndex=0,a.test(e)){const i=d(t.match(o)).map(t=>t.replace(":","")),r=d(e.match(a));r.shift(),i.forEach((t,e)=>{n[t]=r[e]})}}return n}function $(t){let e=[];return p(t)?(y(t).forEach(n=>{!function t(e,n,o){p(o)?y(o).forEach(a=>{t(e,`${n}[${s(o)?"":a}]`,o[a])}):"function"!=typeof o&&e.push(`${encodeURIComponent(n)}=${encodeURIComponent(o)}`)}(e,n,t[n])}),e.join("&")):"string"==typeof t?t:""}function b(t){return/\[/.test(t)}function S(t,e){"?"===(t=l(f(t,m.search))).charAt(0)&&(t=t.replace("?",""));const n={};return t&&t.split("&").forEach(t=>{const o=t.split("=").map(t=>decodeURIComponent(t));(b(o[0])?E:T).apply(this,[].concat(o,[n,f(e,!1),!1]))}),n}function C(t,e){return e?void 0===t?[]:t:(o={},s(n=t)&&n.forEach((t,e)=>{o[e]=t}),o);var n,o}function I(t,e){return h(t)?{ob:t}:s(t)||void 0===t?{ob:C(t,u(e))}:{ob:[t],push:null!==t}}function E(t,e,n,o){o=f(o,!0);const a=t.match(/([^\[]+)\[([^\[]*)\]/)||[];if(3===a.length){const i=a[1];let r=a[2];if(b(t=t.replace(/\[([^\[]*)\]/,"")))""===r&&(r="0"),E(t=t.replace(/[^\[]+/,r),e,n[i]=I(n[i],r).ob,o);else if(r){const t=I(n[i],r);n[i]=t.ob;const a=o?M(e):e;if(t.push){const t={};t[r]=a,n[i].push(t)}else n[i][r]=a}else T(i,e,n,o,!0)}}function T(t,e,n,o,a){f(o,!0)&&(e=M(e)),t in n?(n[t]=s(n[t])?n[t]:[n[t]],n[t].push(e)):n[t]=a?[e]:e}function M(t){if(null==t)return"";if("string"!=typeof t)return t;if(u(t=l(t)))return+t;switch(t){case"null":return null;case"undefined":return;case"true":return!0;case"false":return!1;case"NaN":return NaN;default:return t}}function A(){return S.apply(this,arguments)}function O(t,e){p(t)&&y(t).forEach((function(n){e[n]=t[n]}))}function k(){const t=p(arguments[0])?arguments[0]:{};for(let e=1;e<arguments.length;e++)O(arguments[e],t);return t}function N(t){return t&&"object"==typeof t}function j(t,e){return void 0===t?e:t}function D(t){return"string"==typeof t?t.trim():""}function B(t,e){N(t)&&Object.keys(t).forEach((function(n){e[n]=t[n]}))}function L(t){try{return JSON.parse(t)}catch(e){return t}}const R=window.location,U=window.localStorage,z=window.sessionStorage,J=Object.prototype.hasOwnProperty,q="Thu, 31 Dec 2037 00:00:00 GMT",H="Thu, 01 Jan 1970 00:00:00 UTC",F=864e5,P=["localhost","0.0.0.0","127.0.0.1",null],G={SS:"sessionStorage",LS:"localStorage",CC:"cookie"};function Q(t,e,n,o,a,i){if(t&&void 0!==e){o=j(o,"/"),a=j(a,R.hostname);let r=e;"object"==typeof e&&e&&(r=JSON.stringify(e));let c=new Date;"number"==typeof c&&(n===1/0?c=new Date(q):c.setTime(c.getTime()+n*F));const s=n?`; expires=${c.toUTCString()}`:"",l=`; path=${o.trim()}`,u=-1===P.indexOf(a)?`; domain=${a.trim()}`:"",p=("boolean"==typeof i&&i||void 0===i)&&"https:"===R.protocol?"; secure":"";document.cookie=`${t} = ${r}${s}${u}${l}${p}`}}function K(t,e){if(t){const n=decodeURIComponent(document.cookie);let o="";return function(t,e){if(t&&t.length)for(let n=0;n<t.length;n+=1)if("function"==typeof e){const o=e.apply(t,[t[n],n]);if("boolean"==typeof o){if(o)continue;break}}}(n.split(";"),n=>{const a=`${t}=`,i=n.indexOf(a);if(i>-1)return o=n.substring(i+a.length,n.length),e&&(o=D(o)),!1}),o}return""}function V(t,e,n){const o=K.apply(this,[t]);if(t&&o.length){e=j(e,"/"),n=j(n,R.hostname);const o=-1===P.indexOf(n)?`; domain=${n.trim()}`:"",a=`${t}=; expires=${H}${o}; path=${e}`;return document.cookie=a,!D(K.apply(this,[t])).length}return!1}const W=String.fromCharCode;function X(t,e,n){if(J.call(t.context_dictionaryToCreate,t.context_w)){if(t.context_w.charCodeAt(0)<256){for(let o=0;o<t.context_numBits;o++)t.context_data_val=t.context_data_val<<1,t.context_data_position==e-1?(t.context_data_position=0,t.context_data.push(n(t.context_data_val)),t.context_data_val=0):t.context_data_position++;t.value=t.context_w.charCodeAt(0);for(let o=0;o<8;o++)t.context_data_val=t.context_data_val<<1|1&t.value,t.context_data_position==e-1?(t.context_data_position=0,t.context_data.push(n(t.context_data_val)),t.context_data_val=0):t.context_data_position++,t.value=t.value>>1}else{t.value=1;for(let o=0;o<t.context_numBits;o++)t.context_data_val=t.context_data_val<<1|t.value,t.context_data_position==e-1?(t.context_data_position=0,t.context_data.push(n(t.context_data_val)),t.context_data_val=0):t.context_data_position++,t.value=0;t.value=t.context_w.charCodeAt(0);for(let o=0;o<16;o++)t.context_data_val=t.context_data_val<<1|1&t.value,t.context_data_position==e-1?(t.context_data_position=0,t.context_data.push(n(t.context_data_val)),t.context_data_val=0):t.context_data_position++,t.value=t.value>>1}t.context_enlargeIn--,0==t.context_enlargeIn&&(t.context_enlargeIn=Math.pow(2,t.context_numBits),t.context_numBits++),delete t.context_dictionaryToCreate[t.context_w]}else{t.value=t.context_dictionary[t.context_w];for(let o=0;o<t.context_numBits;o++)t.context_data_val=t.context_data_val<<1|1&t.value,t.context_data_position==e-1?(t.context_data_position=0,t.context_data.push(n(t.context_data_val)),t.context_data_val=0):t.context_data_position++,t.value=t.value>>1}t.context_enlargeIn--,0==t.context_enlargeIn&&(t.context_enlargeIn=Math.pow(2,t.context_numBits),t.context_numBits++)}function Y(t="",e,n){if(null===t)return"";const o={context_dictionary:{},context_dictionaryToCreate:{},context_data:[],context_c:"",context_wc:"",context_w:"",context_enlargeIn:2,context_dictSize:3,context_numBits:2,context_data_val:0,context_data_position:0};let a=0;for(let a=0;a<t.length;a+=1)o.context_c=t.charAt(a),J.call(o.context_dictionary,o.context_c)||(o.context_dictionary[o.context_c]=o.context_dictSize++,o.context_dictionaryToCreate[o.context_c]=!0),o.context_wc=o.context_w+o.context_c,J.call(o.context_dictionary,o.context_wc)?o.context_w=o.context_wc:(X(o,e,n),o.context_dictionary[o.context_wc]=o.context_dictSize++,o.context_w=String(o.context_c));for(""!==o.context_w&&X(o,e,n),o.value=2,a=0;a<o.context_numBits;a++)o.context_data_val=o.context_data_val<<1|1&o.value,o.context_data_position==e-1?(o.context_data_position=0,o.context_data.push(n(o.context_data_val)),o.context_data_val=0):o.context_data_position++,o.value=o.value>>1;for(;;){if(o.context_data_val=o.context_data_val<<1,o.context_data_position==e-1){o.context_data.push(n(o.context_data_val));break}o.context_data_position++}return o.context_data.join("")}function Z(t=""){return null===Y?"":""===Y?null:function(t,e,n){const o=[],a={val:n(0),position:e,index:1},i=[];let r,c,s,l,u=4,p=4,h=3,f="";for(let t=0;t<3;t+=1)o[t]=t;let d=0,_=Math.pow(2,2),x=1;for(;x!==_;)s=a.val&a.position,a.position>>=1,0===a.position&&(a.position=e,a.val=n(a.index++)),d|=(s>0?1:0)*x,x<<=1;switch(r=d){case 0:for(d=0,_=Math.pow(2,8),x=1;x!==_;)s=a.val&a.position,a.position>>=1,0===a.position&&(a.position=e,a.val=n(a.index++)),d|=(s>0?1:0)*x,x<<=1;l=W(d);break;case 1:for(d=0,_=Math.pow(2,16),x=1;x!==_;)s=a.val&a.position,a.position>>=1,0===a.position&&(a.position=e,a.val=n(a.index++)),d|=(s>0?1:0)*x,x<<=1;l=W(d);break;case 2:return""}for(o[3]=l,c=l,i.push(l);;){if(a.index>t)return"";for(d=0,_=Math.pow(2,h),x=1;x!==_;)s=a.val&a.position,a.position>>=1,0===a.position&&(a.position=e,a.val=n(a.index++)),d|=(s>0?1:0)*x,x<<=1;switch(l=d){case 0:for(d=0,_=Math.pow(2,8),x=1;x!==_;)s=a.val&a.position,a.position>>=1,0===a.position&&(a.position=e,a.val=n(a.index++)),d|=(s>0?1:0)*x,x<<=1;o[p++]=W(d),l=p-1,u--;break;case 1:for(d=0,_=Math.pow(2,16),x=1;x!==_;)s=a.val&a.position,a.position>>=1,0===a.position&&(a.position=e,a.val=n(a.index++)),d|=(s>0?1:0)*x,x<<=1;o[p++]=W(d),l=p-1,u--;break;case 2:return i.join("")}if(0===u&&(u=Math.pow(2,h),h++),o[l])f=o[l];else{if(l!==p)return null;f=c+c.charAt(0)}i.push(f),o[p++]=c+f.charAt(0),c=f,0===--u&&(u=Math.pow(2,h),h++)}}(t.length,16384,e=>t.charCodeAt(e)-32)}function tt(t,e,n){if(t&&void 0!==e)if("object"==typeof e&&e&&(e=JSON.stringify(e)),this.available){const o=n?z:U;try{o.setItem(t,this.config.compress?function(t=""){return null===t?"":Y(t,15,t=>W(t+32))+" "}(e):e)}catch(o){Q(t,e,n?void 0:1/0)}}else Q(t,e,n?void 0:1/0)}function et(t){const e=[];try{this.available&&[U,z].forEach(n=>{if(J.call(n,t)){const o=n.getItem(t);e.push({key:t,value:L(this.config.compress?Z(o):o),type:G[n===U?"LS":"SS"]})}});const n=K(t);n&&e.push({key:t,value:L(n),type:G.CC})}catch(t){throw new TypeError(t.message)}return e}function nt(t){try{let e=!1;this.available&&([U,z].forEach(n=>{e=e||!!n.getItem(t)}),e&&[U,z].forEach(e=>{e.removeItem(t)}));const n=V(t);return e||n}catch(e){return V(t)}}const ot=new class{constructor(t){this.config=Object.freeze(function(){let t=0;const e=N(arguments[0])?arguments[0]:{};for(t=1;t<arguments.length;t++)B(arguments[t],e);return e}({compress:!1},t)),this.available=function(){try{return U.setItem("test","test"),U.removeItem("test"),!0}catch(t){return!1}}()}set(){return tt.apply(this,arguments)}get(){const t=this.getAll.apply(this,arguments).filter(t=>!arguments[1]||t.type===G.SS);if(t.length>0)return t[0].value}getAll(){return et.apply(this,arguments)}remove(){return nt.apply(this,arguments)}}({compress:!0});function at(){this.handlers=[]}k(at.prototype,{getDataFromStore:(t,e)=>k(ot.get("routeStore"))[`${e?"#":""}${t}`],setDataToStore(t,e,n){let o=k(ot.get("routeStore"));if(o[t]&&(!n||h(n)&&0===y(n).length))return!1;const a={};return a[`${e?"#":""}${t}`]=n,o=k({},o,a),ot.set("routeStore",o,!0)},contains(t){return!!this.handlers.filter(t).length},remove(t){this.handlers.splice(this.handlers.indexOf(t),1).length}});const it=new at;function rt(){const t=m.hash.match(i);return k({},A(),t?k({},A(t[0])):{})}function ct(t,e,n){const o=x(e),a=(e=e.substring(+o)).split("?")[0];y(n=k(n)).length&&it.setDataToStore(a,o,n);const i=w(t,e);return{hasMatch:y(i).length>0||_(e)&&(t===e||"*"===t),data:it.getDataFromStore(a,o),params:i}}function st(o){o.type=o.hash?t:e;const a=f(o.originalData,{});o.originalEvent=f(o.originalEvent,g(o.type,a)),delete o.originalData,function(t,e,n){n=k(n),it.handlers.forEach(o=>{if(o.eventName===t){const t=m[e.hash?"hash":"pathname"],a=ct(o.isCaseInsensitive?o.route.toLowerCase():o.route,o.isCaseInsensitive?t.toLowerCase():t,n);a.hasMatch&&(!o.hash||o.hash&&e.hash)&&o.handler(k({},e,{data:a.data,params:a.params,query:rt()}))}})}(n,o,a)}function lt(t,e,n){let o=k({replaceMode:e,noTrigger:n},"string"==typeof t?{route:t}:t);if("string"==typeof o.route){const t=x(o.route),e=l(o.route).split("?"),n=e[0].substring(+t),a=$(l(e[1])||l(o.queryString));if(!_(n))throw new TypeError(r);{it.setDataToStore(n,t,o.data);const e=function(t,e,n,o){n=l(n.substring(+("?"===n.charAt(0))));const a=o?m.search:"";return e?`${m.pathname}${a}#${t}${n?`?${n}`:""}`:`${t}${a}${n?`${a?"&":"?"}${n}`:""}`}(n,t,a,o.appendQuery);history[o.replaceMode?"replaceState":"pushState"]({data:o.data},o.title,e),o.noTrigger||st({route:`${t?"#":""}${n}`,hash:t})}}}function ut(o,a,i){let r="string"==typeof o&&0===o.indexOf(c);if(v(o)&&(i=a,a=o,o="*"),s(o))return function(t,e){it.contains(t=>t.prevHandler===e)||ut(n=>{v(e)&&t.indexOf(`${n.hash?"#":""}${n.route.substring(+n.hash)}`)>-1&&e.apply(this,[n])},e)}(o,a);const u=x(o=o.substring(r?c.length:0));o=o.substring(+u),!it.contains(t=>t.handler===a&&t.route===o)&&v(a)&&it.handlers.push({eventName:n,handler:a,prevHandler:i,route:o,hash:u,caseIgnored:r,isCaseInsensitive:r}),(u?[m.hash]:[m.pathname,m.hash]).filter(t=>l(t)).forEach(n=>{const i=x(n),c=ct(r?o.toLowerCase():o,r?n.toLowerCase():n);if(c.hasMatch&&v(a)){const o=i?t:e;a({originalEvent:g(o,c.data),route:n,hash:i,eventName:o,data:c.data,params:c.params,query:rt(),caseIgnored:r,isCaseInsensitive:r})}})}function pt(t,e){const n=it.handlers.length;let o=s(t);const a=d(arguments);return 0===a.length?(it.handlers.length=0,n):(t=o?"*":t,it.handlers.forEach(n=>{let i=n.route===t;const r=1===a.length;r&&"string"==typeof t&&!o||(r&&v(t)&&(e=t,t="*"),i=i&&(n.handler===e||n.prevHandler===e)),i&&it.remove(n)}),n-it.handlers.length)}const ht={set(){return lt.apply(this,arguments)}};function ft(){return ut.apply(this,arguments)}function dt(t){"string"==typeof t&&ft.apply(this,[`${c}${t}`,d(arguments).slice(1)])}function _t(){return pt.apply(this,arguments)}window.addEventListener(`${e}`,(function(t){const e=`${m.pathname}${m.hash}`.split("#"),n={originalEvent:t,originalData:k(t.state&&t.state.data)};st(k({},n,{route:e[0],hash:!1})),e[1]&&st(k({},n,{route:`#${e[1]}`,hash:!0}))}));export{A as deparam,$ as param,ft as route,dt as routeIgnoreCase,w as routeParams,ht as router,_t as unroute};

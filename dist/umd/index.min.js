/**!
 * Router plugin for single page applications with routes
 * Released under MIT license
 * @name Silk router
 * @author Sachin Singh <contactsachinsingh@gmail.com>
 * @version 3.4.10
 * @license MIT
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).silkrouter={})}(this,(function(t){"use strict";var n="hashchange",e="popstate",a="route.changed",o=/:[^\/]+/g,r=/^\/(?=[^?]*)/,c=/\?.+/,i="Route string is not a pure route",u="$$",s=["localhost","0.0.0.0","127.0.0.1",null];function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l=Array.isArray;function h(t){return"string"==typeof t?t.trim():""}function p(t){return t=h("".concat(t)),!(["null","undefined",""].indexOf(t)>-1)&&!isNaN(+t)}function d(t){return t&&"object"===f(t)}function v(t){return d(t)&&!l(t)}function _(t,n){return void 0===t?n:t}function x(t){return Array.prototype.slice.call(t)}function g(t){return"string"==typeof t&&r.test(t)}function y(t){return"string"==typeof t&&"#"===t.charAt(0)}function m(t){return"function"==typeof t}function w(t,n){return{type:t,state:{data:n}}}function b(t){return t?Object.keys(t):[]}function S(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var C=window.location,I=String.fromCharCode;function E(t,n){n=_(n,C.pathname);var e={};if(o.test(t)){var a=new RegExp(t.replace(/\//g,"\\/").replace(/:[^\/\\]+/g,"([^\\/]+)"));if(o.lastIndex=0,a.test(n)){var r=x(t.match(o)).map((function(t){return t.replace(":","")})),c=x(n.match(a));c.shift(),r.forEach((function(t,n){e[t]=c[n]}))}}return e}function M(t){var n=[];return d(t)?(b(t).forEach((function(e){!function t(n,e,a){d(a)?b(a).forEach((function(o){t(n,"".concat(e,"[").concat(l(a)?"":o,"]"),a[o])})):"function"!=typeof a&&n.push("".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(a)))}(n,e,t[e])})),n.join("&")):"string"==typeof t?t:""}function A(t){return/\[/.test(t)}function O(t,n){var e=this;"?"===(t=h(_(t,C.search))).charAt(0)&&(t=t.replace("?",""));var a={};return t&&t.split("&").forEach((function(t){var o=t.split("=").map((function(t){return decodeURIComponent(t)}));(A(o[0])?T:j).apply(e,[].concat(o,[a,_(n,!1),!1]))})),a}function N(t,n){return n?void 0===t?[]:t:(a={},l(e=t)&&e.forEach((function(t,n){a[n]=t})),a);var e,a}function k(t,n){return v(t)?{ob:t}:l(t)||void 0===t?{ob:N(t,p(n))}:{ob:[t],push:null!==t}}function T(t,n,e,a){a=_(a,!0);var o=t.match(/([^\[]+)\[([^\[]*)\]/)||[];if(3===o.length){var r=o[1],c=o[2];if(A(t=t.replace(/\[([^\[]*)\]/,"")))""===c&&(c="0"),T(t=t.replace(/[^\[]+/,c),n,e[r]=k(e[r],c).ob,a);else if(c){var i=k(e[r],c);e[r]=i.ob;var u=a?D(n):n;if(i.push){var s={};s[c]=u,e[r].push(s)}else e[r][c]=u}else j(r,n,e,a,!0)}}function j(t,n,e,a,o){_(a,!0)&&(n=D(n)),t in e?(e[t]=l(e[t])?e[t]:[e[t]],e[t].push(n)):e[t]=o?[n]:n}function D(t){if(null==t)return"";if("string"!=typeof t)return t;if(p(t=h(t)))return+t;switch(t){case"null":return null;case"undefined":return;case"true":return!0;case"false":return!1;case"NaN":return NaN;default:return t}}function B(){return O.apply(this,arguments)}function R(t,n){d(t)&&b(t).forEach((function(e){n[e]=t[e]}))}function L(){for(var t=d(arguments[0])?arguments[0]:{},n=1;n<arguments.length;n++)R(arguments[n],t);return t}function U(t,n,e){t.context_data_position==n-1?(t.context_data_position=0,t.context_data.push(e(t.context_data_val)),t.context_data_val=0):t.context_data_position++}function q(t){t.context_enlargeIn--,0==t.context_enlargeIn&&(t.context_enlargeIn=Math.pow(2,t.context_numBits),t.context_numBits++)}function z(t,n,e){if(S(t.context_dictionaryToCreate,t.context_w)){if(t.context_w.charCodeAt(0)<256){for(var a=0;a<t.context_numBits;a++)t.context_data_val=t.context_data_val<<1,U(t,n,e);t.value=t.context_w.charCodeAt(0);for(var o=0;o<8;o++)t.context_data_val=t.context_data_val<<1|1&t.value,U(t,n,e),t.value=t.value>>1}else{t.value=1;for(var r=0;r<t.context_numBits;r++)t.context_data_val=t.context_data_val<<1|t.value,U(t,n,e),t.value=0;t.value=t.context_w.charCodeAt(0);for(var c=0;c<16;c++)t.context_data_val=t.context_data_val<<1|1&t.value,U(t,n,e),t.value=t.value>>1}q(t),delete t.context_dictionaryToCreate[t.context_w]}else{t.value=t.context_dictionary[t.context_w];for(var i=0;i<t.context_numBits;i++)t.context_data_val=t.context_data_val<<1|1&t.value,U(t,n,e),t.value=t.value>>1}q(t)}function H(t,n,e,a){for(var o=0,r=1;r!==n;){var c=t.val&t.position;t.position>>=1,0===t.position&&(t.position=e,t.val=a(t.index++)),o|=(c>0?1:0)*r,r<<=1}return o}function J(t){return null==t?"":function(t,n,e){if(null==t)return"";for(var a={context_dictionary:{},context_dictionaryToCreate:{},context_data:[],context_c:"",context_wc:"",context_w:"",context_enlargeIn:2,context_dictSize:3,context_numBits:2,context_data_val:0,context_data_position:0},o=0,r=0;r<t.length;r+=1)a.context_c=t.charAt(r),S(a.context_dictionary,a.context_c)||(a.context_dictionary[a.context_c]=a.context_dictSize++,a.context_dictionaryToCreate[a.context_c]=!0),a.context_wc=a.context_w+a.context_c,S(a.context_dictionary,a.context_wc)?a.context_w=a.context_wc:(z(a,n,e),a.context_dictionary[a.context_wc]=a.context_dictSize++,a.context_w=String(a.context_c));for(""!==a.context_w&&z(a,n,e),a.value=2,o=0;o<a.context_numBits;o++)a.context_data_val=a.context_data_val<<1|1&a.value,U(a,n,e),a.value=a.value>>1;for(;;){if(a.context_data_val=a.context_data_val<<1,a.context_data_position==n-1){a.context_data.push(e(a.context_data_val));break}a.context_data_position++}return a.context_data.join("")}(t,15,(function(t){return I(t+32)}))+" "}function P(t){return null==t?"":""===t?null:function(t,n,e){for(var a,o,r=[],c={val:e(0),position:n,index:1},i=[],u=4,s=4,f=3,l="",h=0;h<3;h++)r[h]=h;switch(H(c,Math.pow(2,2),n,e)){case 0:o=I(H(c,Math.pow(2,8),n,e));break;case 1:o=I(H(c,Math.pow(2,16),n,e));break;case 2:return""}for(r[3]=o,a=o,i.push(o);;){if(c.index>t)return"";switch(o=H(c,Math.pow(2,f),n,e)){case 0:r[s++]=I(H(c,Math.pow(2,8),n,e)),o=s-1,u--;break;case 1:r[s++]=I(H(c,Math.pow(2,16),n,e)),o=s-1,u--;break;case 2:return i.join("")}if(0===u&&(u=Math.pow(2,f),f++),r[o])l=r[o];else{if(o!==s)return null;l=a+a.charAt(0)}i.push(l),r[s++]=a+l.charAt(0),a=l,0===--u&&(u=Math.pow(2,f),f++)}}(t.length,16384,(function(n){return t.charCodeAt(n)-32}))}function F(){try{return sessionStorage.setItem("testKey","testValue"),sessionStorage.removeItem("testKey"),!0}catch(t){return!1}}function K(t,n){return F()?sessionStorage.setItem(t,J(d(n)?JSON.stringify(n):n)):function(t,n){if(t&&void 0!==n){var e=C.hostname,a="https:"===C.protocol,o=n;d(n)&&(o=JSON.stringify(n));var r=-1===s.indexOf(e)?"; domain=".concat(h(e)):"",c=a?"; secure":"";document.cookie="".concat(t," = ").concat(o).concat(r).concat("; path=/").concat(c)}}(t,n)}function $(t){if(F()){var n=P(sessionStorage.getItem(t));try{return n=JSON.parse(n)}catch(t){return n}}return function(t){if(t){var n=decodeURIComponent(document.cookie),e="";return function(t,n){if(t&&t.length)for(var e=0;e<t.length;e+=1)if("function"==typeof n){var a=n.apply(t,[t[e],e]);if("boolean"==typeof a){if(a)continue;break}}}(n.split(";"),(function(n){var a="".concat(t,"="),o=n.indexOf(a);if(o>-1)return e=h(n.substring(o+a.length,n.length)),!1})),e}return""}(t)}var Q={set:function(){return K.apply(this,arguments)},get:function(){return $.apply(this,arguments)}};function V(){this.handlers=[]}L(V.prototype,{getDataFromStore:function(t,n){return L(Q.get("routeStore"))["".concat(n?"#":"").concat(t)]},setDataToStore:function(t,n,e){var a=L(Q.get("routeStore"));if(a[t]&&(!e||v(e)&&0===b(e).length))return!1;var o={};return o["".concat(n?"#":"").concat(t)]=e,a=L({},a,o),Q.set("routeStore",a)},contains:function(t){return!!this.handlers.filter(t).length},remove:function(t){this.handlers.splice(this.handlers.indexOf(t),1).length}});var G=new V;function W(){var t=C.hash.match(c);return L({},B(),t?L({},B(t[0])):{})}function X(t,n,e){var a=y(n),o=(n=n.substring(+a)).split("?")[0];b(e=L(e)).length&&G.setDataToStore(o,a,e);var r=E(t,n);return{hasMatch:b(r).length>0||g(n)&&(t===n||"*"===t),data:G.getDataFromStore(o,a),params:r}}function Y(t){t.type=t.hash?n:e;var o=_(t.originalData,{});t.originalEvent=_(t.originalEvent,w(t.type,o)),delete t.originalData,function(t,n,e){e=L(e),G.handlers.forEach((function(a){if(a.eventName===t){var o=C[n.hash?"hash":"pathname"],r=X(a.isCaseInsensitive?a.route.toLowerCase():a.route,a.isCaseInsensitive?o.toLowerCase():o,e);r.hasMatch&&(!a.hash||a.hash&&n.hash)&&a.handler(L({},n,{data:r.data,params:r.params,query:W()}))}}))}(a,t,o)}function Z(t,n,e){var a=L({replaceMode:n,noTrigger:e},"string"==typeof t?{route:t}:t);if("string"==typeof a.route){var o=y(a.route),r=h(a.route).split("?"),c=r[0].substring(+o),u=M(h(r[1])||h(a.queryString));if(!g(c))throw new TypeError(i);G.setDataToStore(c,o,a.data);var s=function(t,n,e,a){e=h(e.substring(+("?"===e.charAt(0))));var o=a?C.search:"";return n?"".concat(C.pathname).concat(o,"#").concat(t).concat(e?"?".concat(e):""):"".concat(t).concat(o).concat(e?"".concat(o?"&":"?").concat(e):"")}(c,o,u,a.appendQuery);history[a.replaceMode?"replaceState":"pushState"]({data:a.data},a.title,s),a.noTrigger||Y({route:"".concat(o?"#":"").concat(c),hash:o})}}function tt(t,o,r){var c="string"==typeof t&&0===t.indexOf(u);if(m(t)&&(r=o,o=t,t="*"),l(t))return function(t,n){var e=this;G.contains((function(t){return t.prevHandler===n}))||tt((function(a){m(n)&&t.indexOf("".concat(a.hash?"#":"").concat(a.route.substring(+a.hash)))>-1&&n.apply(e,[a])}),n)}(t,o);var i=y(t=t.substring(c?u.length:0));t=t.substring(+i),!G.contains((function(n){return n.handler===o&&n.route===t}))&&m(o)&&G.handlers.push({eventName:a,handler:o,prevHandler:r,route:t,hash:i,isCaseInsensitive:c}),(i?[C.hash]:[C.pathname,C.hash]).filter((function(t){return h(t)})).forEach((function(a){var r=y(a),i=X(c?t.toLowerCase():t,c?a.toLowerCase():a);if(i.hasMatch&&m(o)){var u=r?n:e;o({originalEvent:w(u,i.data),route:a,hash:r,eventName:u,data:i.data,params:i.params,query:W(),isCaseInsensitive:c})}}))}function nt(t,n){var e=G.handlers.length,a=l(t);if(a&&!n)return 0;var o=x(arguments);return 0===o.length?(G.handlers.length=0,e):(t=a?"*":t,G.handlers.forEach((function(e){var r=e.route===t,c=1===o.length;c&&"string"==typeof t&&!a||(c&&m(t)&&(n=t,t="*"),r=r&&(e.handler===n||e.prevHandler===n)),r&&G.remove(e)})),e-G.handlers.length)}var et={set:function(){return Z.apply(this,arguments)}};function at(){return tt.apply(this,arguments)}window.addEventListener("".concat(e),(function(t){var n="".concat(C.pathname).concat(C.hash).split("#"),e={originalEvent:t,originalData:L(t.state&&t.state.data)};Y(L({},e,{route:n[0],hash:!1})),n[1]&&Y(L({},e,{route:"#".concat(n[1]),hash:!0}))})),t.deparam=B,t.param=M,t.route=at,t.routeIgnoreCase=function(t){"string"==typeof t&&at.apply(this,["".concat(u).concat(t),x(arguments).slice(1)])},t.routeParams=E,t.router=et,t.unroute=function(){return nt.apply(this,arguments)},Object.defineProperty(t,"__esModule",{value:!0})}));

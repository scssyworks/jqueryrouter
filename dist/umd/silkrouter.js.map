{"version":3,"file":"silkrouter.js","sources":["../../src/js/utils/constants.js","../../src/js/utils/utils.js","../../src/js/utils/assign.js","../../src/js/utils/triggerEvent.js","../../src/js/api/routerEvent/index.js","../../src/js/api/collate/index.js","../../src/js/api/bindRouterEvents/index.js","../../src/js/utils/query.js","../../node_modules/is-number/index.js","../../src/js/utils/vars.js","../../src/js/utils/deparam.js","../../src/js/api/resolveQuery/index.js","../../src/js/api/set/index.js","../../src/js/api/callOnce/index.js","../../src/js/api/router/index.js","../../src/js/utils/params.js","../../src/js/operators/index.js"],"sourcesContent":["/**\n * Router constants\n */\nexport const POP_STATE = 'popstate';\nexport const REG_ROUTE_PARAMS = /:[^/]+/g;\nexport const REG_PATHNAME = /^\\/(?=[^?]*)/;\nexport const REG_COMPLEX = /\\[/;\nexport const REG_VARIABLE = /([^[]+)\\[([^[]*)\\]/;\nexport const REG_REPLACE_BRACKETS = /\\[([^[]*)\\]/;\nexport const REG_REPLACE_NEXTPROP = /[^[]+/;\nexport const HISTORY_UNSUPPORTED =\n  'Current browser does not support history object';\nexport const INVALID_ROUTE = 'Route string is not a pure route';\nexport const VIRTUAL_PUSHSTATE = 'vpushstate';\nexport const CACHED_FIELDS = [\n  'route',\n  'hashRouting',\n  'path',\n  'hash',\n  'search',\n  'hashSearch',\n  'data',\n];\n","import { REG_PATHNAME } from './constants';\n\n/**\n * Shorthand for Array.isArray\n */\nexport const isArr = Array.isArray;\n\n/**\n * Safely trims string\n * @param {string} str String\n */\nexport function trim(str) {\n  return typeof str === 'string' ? str.trim() : '';\n}\n\n/**\n * Checks if value is an object\n * @param {*} value Any type of value\n */\nexport function isObject(value) {\n  return value && typeof value === 'object';\n}\n\n/**\n * Checks if key is a true object\n * @param {*} value Any type of value\n */\nexport function isPureObject(value) {\n  return isObject(value) && !isArr(value);\n}\n\n/**\n * Checks if given route is valid\n * @private\n * @param {string} route Route string\n */\nexport function isValidRoute(route) {\n  return typeof route === 'string' && REG_PATHNAME.test(route);\n}\n\n/**\n * Checks if key is present in provided object\n * @param {object} ob Object\n * @param {*} key Key\n */\nexport function hasOwn(ob, key) {\n  return Object.prototype.hasOwnProperty.call(ob, key);\n}\n\n/**\n * Loops over an array like object\n * @param {object} arrayObj Array or array like object\n * @param {function} callback Callback function\n */\nexport function each(arrayObj, callback) {\n  if (arrayObj && arrayObj.length) {\n    for (let index = 0; index < arrayObj.length; index += 1) {\n      if (typeof callback === 'function') {\n        const continueTheLoop = callback.apply(arrayObj, [\n          arrayObj[index],\n          index,\n        ]);\n        if (typeof continueTheLoop === 'boolean') {\n          if (continueTheLoop) {\n            continue;\n          } else {\n            break;\n          }\n        }\n      }\n    }\n  }\n}\n","import { isObject } from './utils';\n\n/**\n * Inner loop function for assign\n * @private\n * @param {object} ref Argument object\n * @param {object} target First object\n */\nfunction loopFunc(ref, target) {\n    if (isObject(ref)) {\n        Object.keys(ref).forEach(function (key) {\n            target[key] = ref[key];\n        });\n    }\n}\n\n/**\n * Polyfill for Object.assign only smaller and with less features\n * @private\n * @returns {object}\n */\nexport function assign() {\n    const target = isObject(arguments[0]) ? arguments[0] : {};\n    for (let i = 1; i < arguments.length; i++) {\n        loopFunc(arguments[i], target);\n    }\n    return target;\n}","import { each } from './utils';\n\n// Polyfill custom event\nif (typeof window.CustomEvent === 'undefined') {\n    const CustomEvent = function (event, params) {\n        params = params || { bubbles: false, cancelable: false, detail: undefined };\n        const evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n        return evt;\n    }\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent;\n}\n\n// Internal function\nfunction isValidTarget(target) {\n    return (\n        target instanceof NodeList\n        || target instanceof HTMLCollection\n        || Array.isArray(target)\n    );\n}\n\n/**\n * Function to trigger custom event\n * @param {Node|NodeList|HTMLCollection|Node[]} target Target element or list\n * @param {string} eventType Event type\n * @param {any[]} data Data to be passed to handler\n */\nexport function trigger(target, eventType, data) {\n    if (target instanceof Node) {\n        target = [target];\n    }\n    if (isValidTarget(target) && typeof eventType === 'string') {\n        each(target, el => {\n            const customEvent = new window.CustomEvent(eventType, {\n                bubbles: true,\n                cancelable: true,\n                detail: (data || [])\n            });\n            el.dispatchEvent(customEvent);\n        });\n    }\n}","import { trim } from '../../utils/utils';\nexport default class RouterEvent {\n  constructor(routeInfo, currentEvent) {\n    // Set relevant parameters\n    const [routeObject, originalEvent, routerInstance] = routeInfo;\n    const { location, history } = routerInstance.config;\n    this.route = routeObject.path;\n    this.hashRouting = routeObject.hash;\n    this.routerInstance = routerInstance;\n    this.virtualEvent = currentEvent || {};\n    this.originalEvent = originalEvent || {};\n    this.path = trim(location.pathname);\n    this.hash = location.hash;\n    this.search = trim(location.search.substring(1));\n    this.hashSearch = trim(location.hash && location.hash.split('?')[1]);\n    const { state } = this.originalEvent;\n    this.data = (state && state.data) || (history.state && history.state.data);\n  }\n}\n","import { Observable } from 'rxjs';\nimport RouterEvent from '../routerEvent';\n\nexport default function collate() {\n    const currentRouterInstance = this;\n    return (observable) => new Observable(subscriber => {\n        const subn = observable.subscribe({\n            next(event) {\n                const [, , routerInstance] = event.detail;\n                if (routerInstance === currentRouterInstance) {\n                    subscriber.next(\n                        new RouterEvent(event.detail, event)\n                    );\n                }\n            },\n            error() {\n                subscriber.error(...arguments);\n            },\n            complete() {\n                subscriber.complete();\n            }\n        });\n        return () => {\n            subn.unsubscribe();\n        }\n    });\n}","import { fromEvent } from 'rxjs';\nimport { POP_STATE, VIRTUAL_PUSHSTATE } from '../../utils/constants';\nimport { trigger } from '../../utils/triggerEvent';\nimport collate from '../collate';\nimport { trim } from '../../utils/utils';\n\nexport default function bindRouterEvents() {\n    const { context, location, hashRouting } = this.config;\n    this.popStateSubscription = fromEvent(window, POP_STATE).subscribe(e => {\n        const path = trim(\n            hashRouting\n                ? location.hash.substring(1).split('?')[0]\n                : location.pathname\n        );\n        if (path) {\n            trigger(context, VIRTUAL_PUSHSTATE, [{ path, hash: hashRouting }, e, this]);\n        }\n    });\n    this.listeners = fromEvent(context, VIRTUAL_PUSHSTATE)\n        .pipe(collate.apply(this));\n    if (hashRouting && !location.hash) {\n        this.set('/', true, false); // Replace current hash path without executing anythings\n    }\n}","import { isArr, isObject } from './utils';\n\n/**\n * Builds query string recursively\n * @private\n * @param {string[]} qsList List of query string key value pairs\n * @param {*} key Key\n * @param {*} obj Value\n */\nfunction buildQuery(qsList, key, obj) {\n    if (isObject(obj)) {\n        Object.keys(obj).forEach(obKey => {\n            buildQuery(qsList, `${key}[${isArr(obj) ? '' : obKey}]`, obj[obKey]);\n        });\n    } else if (typeof obj !== 'function') {\n        qsList.push(`${encodeURIComponent(key)}=${encodeURIComponent(obj)}`);\n    }\n}\n\n/**\n * Converts an object to a query string\n * @private\n * @param {object} obj Object which should be converted to a string\n * @returns {string}\n */\nexport function toQueryString(obj) {\n    let qsList = [];\n    if (isObject(obj)) {\n        Object.keys(obj).forEach(key => {\n            buildQuery(qsList, key, obj[key]);\n        });\n        return qsList.join('&');\n    }\n    return typeof obj === 'string' ? obj : '';\n}","/*!\n * is-number <https://github.com/jonschlinkert/is-number>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function(num) {\n  if (typeof num === 'number') {\n    return num - num === 0;\n  }\n  if (typeof num === 'string' && num.trim() !== '') {\n    return Number.isFinite ? Number.isFinite(+num) : isFinite(+num);\n  }\n  return false;\n};\n","export const loc = window.location;\nexport const f = String.fromCharCode;\n","import isNumber from 'is-number';\nimport { loc } from './vars';\nimport { isArr, trim, isPureObject } from './utils';\nimport {\n  REG_COMPLEX,\n  REG_VARIABLE,\n  REG_REPLACE_BRACKETS,\n  REG_REPLACE_NEXTPROP,\n} from './constants';\n\n/**\n * Checks if query parameter key is a complex notation\n * @param {string} q\n */\nfunction ifComplex(q) {\n  return REG_COMPLEX.test(q);\n}\n\n/**\n * Converts query string to JavaScript object\n * @param {string} qs query string argument (defaults to url query string)\n */\nfunction deparam(qs = loc.search, coerce = false) {\n  qs = trim(qs);\n  if (qs.charAt(0) === '?') {\n    qs = qs.replace('?', '');\n  }\n  const queryObject = Object.create(null);\n  if (qs) {\n    qs.split('&').forEach((qq) => {\n      const qArr = qq.split('=').map((part) => decodeURIComponent(part));\n      (ifComplex(qArr[0]) ? complex : simple).apply(this, [\n        ...qArr,\n        queryObject,\n        coerce,\n        false,\n      ]);\n    });\n  }\n  return queryObject;\n}\n\n/**\n * Converts an array to an object\n * @param {array} arr\n */\nfunction toObject(arr) {\n  var convertedObj = Object.create(null);\n  if (isArr(arr)) {\n    arr.forEach((value, index) => {\n      convertedObj[index] = value;\n    });\n  }\n  return convertedObj;\n}\n\n/**\n * Resolves an array to object if required\n * @param {array} ob An array object\n * @param {boolean} isNumber flag to test if next key is number\n */\nfunction resolve(ob, isNextNumber) {\n  return isNextNumber ? (typeof ob === 'undefined' ? [] : ob) : toObject(ob);\n}\n\n/**\n * Resolves the target object for next iteration\n * @param {Object} ob current reference object\n * @param {string} nextProp reference property in current object\n */\nfunction resolveObj(ob, nextProp) {\n  if (isPureObject(ob)) return { ob };\n  if (isArr(ob) || typeof ob === 'undefined')\n    return { ob: resolve(ob, isNumber(nextProp)) };\n  return { ob: [ob], push: ob !== null };\n}\n\n/**\n * Handles complex query parameters\n * @param {string} key\n * @param {string} value\n * @param {Object} obj\n */\nfunction complex(key, value, obj, coercion) {\n  const match = key.match(REG_VARIABLE) || [];\n  if (match.length === 3) {\n    const prop = match[1];\n    let nextProp = match[2];\n    key = key.replace(REG_REPLACE_BRACKETS, '');\n    if (ifComplex(key)) {\n      if (nextProp === '') nextProp = '0';\n      key = key.replace(REG_REPLACE_NEXTPROP, nextProp);\n      complex(\n        key,\n        value,\n        (obj[prop] = resolveObj(obj[prop], nextProp).ob),\n        coercion\n      );\n    } else if (nextProp) {\n      const resolved = resolveObj(obj[prop], nextProp);\n      obj[prop] = resolved.ob;\n      const coercedValue = coercion ? coerce(value) : value;\n      if (resolved.push) {\n        obj[prop].push({\n          [nextProp]: coercedValue,\n        });\n      } else {\n        obj[prop][nextProp] = coercedValue;\n      }\n    } else {\n      simple(prop, value, obj, coercion, true);\n    }\n  }\n}\n\n/**\n * Handles simple query\n * @param {array} qArr\n * @param {Object} queryObject\n * @param {boolean} toArray\n */\nfunction simple(key, value, queryObject, coercion, toArray) {\n  if (coercion) {\n    value = coerce(value);\n  }\n  if (key in queryObject) {\n    queryObject[key] = isArr(queryObject[key])\n      ? queryObject[key]\n      : [queryObject[key]];\n    queryObject[key].push(value);\n  } else {\n    queryObject[key] = toArray ? [value] : value;\n  }\n}\n\n/**\n * Restores values to their original type\n * @param {string} value undefined or string value\n */\nfunction coerce(value) {\n  if (value == null) return '';\n  if (typeof value !== 'string') return value;\n  if (isNumber((value = trim(value)))) return +value;\n  switch (value) {\n    case 'null':\n      return null;\n    case 'undefined':\n      return undefined;\n    case 'true':\n      return true;\n    case 'false':\n      return false;\n    case 'NaN':\n      return NaN;\n    default:\n      return value;\n  }\n}\n\n// Library encapsulation\nfunction lib() {\n  return deparam.apply(this, arguments);\n}\n\nexport { lib as deparam };\n","import { trim } from '../../utils/utils';\nimport { toQueryString } from '../../utils/query';\nimport { assign } from '../../utils/assign';\nimport { deparam } from '../../utils/deparam';\n\n/**\n * Resolves and analyzes existing query string\n * @private\n * @param {string} queryString Query string\n * @param {string} hashRouting Flag to test if hash routing is enabled\n */\nexport default function resolveQuery(queryString, hashRouting) {\n    const { location } = this.config;\n    const search = trim(location.search && location.search.substring(1));\n    const existingQuery = hashRouting\n        ? trim(location.hash.split('?')[1])\n        : trim(search);\n    if (!existingQuery) return queryString;\n    return toQueryString(assign(deparam(search), deparam(existingQuery), deparam(queryString)));\n}","import { trigger } from '../../utils/triggerEvent';\nimport { VIRTUAL_PUSHSTATE, INVALID_ROUTE } from '../../utils/constants';\nimport { isValidRoute, trim, isObject } from '../../utils/utils';\nimport { toQueryString } from '../../utils/query';\nimport resolveQuery from '../resolveQuery';\nimport { assign } from '../../utils/assign';\n\nexport default function set(route, replace = false, exec = true) {\n  const { preservePath, hashRouting, history } = this.config;\n  const routeObject = assign(\n    { replace, exec },\n    typeof route === 'string' ? { route } : route\n  );\n  replace = routeObject.replace;\n  exec = routeObject.exec;\n  let { route: routeStr, queryString } = routeObject;\n  const {\n    preserveQuery,\n    data,\n    pageTitle = document.querySelector('head > title').textContent,\n  } = routeObject;\n  const routeParts = routeStr.split('?');\n  // Check if query string is an object\n  if (isObject(queryString)) {\n    queryString = toQueryString(queryString);\n  }\n  // Resolve to URL query string if it's not explicitly passed\n  queryString = trim(queryString ? queryString : routeParts[1]);\n  routeStr = trim(routeParts[0]);\n  // Check if query preservation is required. Resolve query accordingly\n  if (preserveQuery) {\n    queryString = resolveQuery.apply(this, [queryString, hashRouting]);\n  }\n  if (isValidRoute(routeStr)) {\n    const unmodifiedRoute = routeStr;\n    if (hashRouting) {\n      routeStr = `/#${routeStr}`;\n      // Path preservation should only work for hash routing\n      if (preservePath) {\n        routeStr = `${routeStr.substring(1)}`;\n      }\n    }\n    // Append query string\n    routeStr = `${routeStr}${queryString ? `?${queryString}` : ''}`;\n    history[replace ? 'replaceState' : 'pushState'](\n      { data },\n      pageTitle,\n      routeStr\n    );\n    if (exec && unmodifiedRoute) {\n      trigger(this.config.context, VIRTUAL_PUSHSTATE, [\n        {\n          path: unmodifiedRoute,\n          hash: hashRouting,\n        },\n        undefined,\n        this,\n      ]);\n    }\n  } else {\n    throw new TypeError(INVALID_ROUTE);\n  }\n  return this;\n}\n","import { Observable } from 'rxjs';\nimport { trim } from '../../utils/utils';\nimport RouterEvent from '../routerEvent';\n\nexport default function callOnce(isDone) {\n    const { hashRouting, location } = this.config;\n    const path = trim(hashRouting ? location.hash.substring(1).split('?')[0] : location.pathname);\n    return (observable) => new Observable(subscriber => {\n        const subn = observable.subscribe({\n            next() {\n                subscriber.next(...arguments);\n            },\n            error() {\n                subscriber.error(...arguments);\n            },\n            complete() {\n                subscriber.complete();\n            }\n        });\n        if (!isDone) {\n            isDone = true;\n            if (path) {\n                subscriber.next(\n                    new RouterEvent([{ path, hash: hashRouting }, undefined, this])\n                );\n            }\n        }\n        return () => {\n            subn.unsubscribe();\n        }\n    });\n}","import { assign } from '../../utils/assign';\nimport bindRouterEvents from '../bindRouterEvents';\nimport set from '../set';\nimport { HISTORY_UNSUPPORTED } from '../../utils/constants';\nimport callOnce from '../callOnce';\n\nexport default class Router {\n    constructor(config = {}) {\n        if (!window.history.pushState) {\n            throw new Error(HISTORY_UNSUPPORTED);\n        }\n        config = assign({\n            hashRouting: false, // Switch to hash routing\n            preservePath: false, // Works for hash routing\n            context: document.body, // To change the context of \"vpushstate\" event\n            location: window.location, // Should remain unchanged\n            history: window.history // History object\n        }, config);\n        this.config = Object.freeze(config);\n        this.__paths__ = [];\n        bindRouterEvents.apply(this);\n    }\n    pipe() {\n        return this.listeners.pipe(\n            callOnce.apply(this),\n            ...arguments\n        );\n    }\n    subscribe() {\n        return this.listeners\n            .pipe(callOnce.apply(this))\n            .subscribe(...arguments);\n    }\n    set() {\n        return set.apply(this, arguments);\n    }\n    destroy(callback) {\n        if (typeof callback === 'function') {\n            callback();\n        }\n        this.popStateSubscription.unsubscribe(); // Unsubscribe popstate event\n        this.__paths__.length = 0;\n    }\n}","import { REG_ROUTE_PARAMS } from './constants';\nimport { loc } from './vars';\n\n/**\n * Parses current path and returns params object\n * @private\n * @param {string} expr Route expression\n * @param {string} path URL path\n * @returns {object}\n */\nexport function extractParams(expr, path = loc.pathname) {\n    const params = {};\n    if (REG_ROUTE_PARAMS.test(expr)) {\n        const pathRegex = new RegExp(expr.replace(/\\//g, \"\\\\/\").replace(/:[^/\\\\]+/g, \"([^\\\\/]+)\"));\n        REG_ROUTE_PARAMS.lastIndex = 0;\n        if (pathRegex.test(path)) {\n            const keys = [...expr.match(REG_ROUTE_PARAMS)].map(key => key.replace(':', ''));\n            const values = [...path.match(pathRegex)];\n            values.shift();\n            keys.forEach((key, index) => {\n                params[key] = values[index];\n            });\n        }\n    }\n    return params;\n}","import { trim, isValidRoute, each, isObject } from '../utils/utils';\nimport { Observable } from 'rxjs';\nimport { INVALID_ROUTE, CACHED_FIELDS } from '../utils/constants';\nimport { extractParams } from '../utils/params';\nimport { deparam as queryDeparam } from '../utils/deparam';\nimport Router from '../api/router';\nimport { assign } from '../utils/assign';\n\n/**\n * Operator to compare a specific route\n * @param {string} routeStr Route string\n * @param {Router} routerInstance Current router object [optional]\n * @param {boolean} ignoreCase Ignore case in route string\n */\nexport function route(routeStr, routerInstance, ignoreCase) {\n    if (typeof routerInstance === 'boolean') {\n        ignoreCase = routerInstance;\n        routerInstance = undefined;\n    }\n    routeStr = trim(routeStr);\n    if (routerInstance instanceof Router) {\n        const paths = routerInstance.__paths__;\n        if (paths.indexOf(routeStr) === -1) {\n            paths.push(routeStr);\n        }\n    }\n    return (observable) => new Observable(subscriber => {\n        const subn = observable.subscribe({\n            next(event) {\n                let incomingRoute = event.route;\n                if (isValidRoute(routeStr)) {\n                    if (ignoreCase) {\n                        routeStr = routeStr.toLowerCase();\n                        incomingRoute = incomingRoute.toLowerCase();\n                    }\n                    const params = extractParams(routeStr, incomingRoute);\n                    const paramsLength = Object.keys(params).length;\n                    if (\n                        incomingRoute === routeStr\n                        || paramsLength > 0\n                    ) {\n                        if (paramsLength > 0) {\n                            event.params = params;\n                        }\n                        subscriber.next(event);\n                    }\n                } else {\n                    subscriber.error(\n                        new Error(INVALID_ROUTE)\n                    );\n                }\n            },\n            error() {\n                subscriber.error(...arguments);\n            },\n            complete() {\n                subscriber.complete();\n            }\n        });\n        return () => {\n            if (routerInstance instanceof Router) {\n                const paths = routerInstance.__paths__;\n                const existingRouteIndex = paths.indexOf(routeStr);\n                if (existingRouteIndex > -1) {\n                    paths.splice(existingRouteIndex, 1);\n                }\n            }\n            subn.unsubscribe();\n        }\n    });\n}\n\n/**\n * Converts search and hashSearch strings to object\n * @param {boolean} coerce Flag to enable value typecast\n */\nexport function deparam(coerce = false) {\n    return (observable) => new Observable(subscriber => {\n        const subn = observable.subscribe({\n            next(event) {\n                try {\n                    event.search = queryDeparam(event.search, coerce);\n                    event.hashSearch = queryDeparam(event.hashSearch, coerce);\n                    subscriber.next(event);\n                } catch (e) {\n                    subscriber.error(e);\n                }\n            },\n            error() {\n                subscriber.error(...arguments);\n            },\n            complete() {\n                subscriber.complete();\n            }\n        });\n        return () => {\n            subn.unsubscribe();\n        }\n    });\n}\n\n/**\n * Modifies current subscriber to detect errors\n * @param {Router} routerInstance Current router object\n */\nexport function noMatch(routerInstance) {\n    return (observable) => new Observable(subscriber => {\n        const subn = observable.subscribe({\n            next(event) {\n                if (routerInstance instanceof Router) {\n                    const paths = routerInstance.__paths__;\n                    if (paths.length > 0) {\n                        const currentRoute = event.route;\n                        let match = false;\n                        for (let i = 0; i < paths.length; i++) {\n                            if (paths[i] === currentRoute || Object.keys(extractParams(paths[i], currentRoute)).length) {\n                                match = true;\n                                break;\n                            }\n                        }\n                        if (!match) {\n                            event.noMatch = true;\n                            subscriber.next(event);\n                        }\n                    }\n                }\n            },\n            error() {\n                subscriber.error(...arguments);\n            },\n            complete() {\n                subscriber.complete();\n            }\n        });\n        return () => {\n            subn.unsubscribe();\n        }\n    });\n}\n\nfunction deepComparison(first, second, result) {\n    each(Object.keys(first), key => {\n        if (\n            isObject(first[key])\n            && isObject(second[key])\n        ) {\n            deepComparison(first[key], second[key], result);\n        } else {\n            result.break = first[key] !== second[key];\n        }\n    });\n}\n\n/**\n * Caches incoming routes to avoid calling handler if there is no change\n * @param {string[]} keys\n * @param {boolean} deep\n */\nexport function cache(keys = CACHED_FIELDS, deep = false) {\n    let cache = {};\n    if (typeof keys === 'boolean') {\n        deep = keys;\n        keys = CACHED_FIELDS;\n    }\n    return (observable) => new Observable(subscriber => {\n        const subn = observable.subscribe({\n            next(event) {\n                each(keys, key => {\n                    if (\n                        deep\n                        && isObject(event[key])\n                        && isObject(cache[key])\n                    ) {\n                        const result = {};\n                        deepComparison(event[key], cache[key], result);\n                        if (result.break) {\n                            assign(cache, event);\n                            subscriber.next(event);\n                            return false;\n                        }\n                    } else if (event[key] !== cache[key]) {\n                        assign(cache, event);\n                        subscriber.next(event);\n                        return false; // break loop\n                    }\n                });\n            },\n            error() {\n                subscriber.error(...arguments);\n            },\n            complete() {\n                subscriber.complete();\n            }\n        });\n        return () => {\n            subn.unsubscribe();\n            cache = {};\n        };\n    });\n}"],"names":["POP_STATE","REG_ROUTE_PARAMS","REG_PATHNAME","REG_COMPLEX","REG_VARIABLE","REG_REPLACE_BRACKETS","REG_REPLACE_NEXTPROP","HISTORY_UNSUPPORTED","INVALID_ROUTE","VIRTUAL_PUSHSTATE","CACHED_FIELDS","isArr","Array","isArray","trim","str","isObject","value","isPureObject","isValidRoute","route","test","each","arrayObj","callback","length","index","continueTheLoop","apply","loopFunc","ref","target","Object","keys","forEach","key","assign","arguments","i","window","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","prototype","Event","isValidTarget","NodeList","HTMLCollection","trigger","eventType","data","Node","el","customEvent","dispatchEvent","RouterEvent","routeInfo","currentEvent","routeObject","originalEvent","routerInstance","config","location","history","path","hashRouting","hash","virtualEvent","pathname","search","substring","hashSearch","split","state","collate","currentRouterInstance","observable","Observable","subscriber","subn","subscribe","next","error","complete","unsubscribe","bindRouterEvents","context","popStateSubscription","fromEvent","e","listeners","pipe","set","buildQuery","qsList","obj","obKey","push","encodeURIComponent","toQueryString","join","loc","ifComplex","q","deparam","qs","coerce","charAt","replace","queryObject","create","qq","qArr","map","part","decodeURIComponent","complex","simple","toObject","arr","convertedObj","resolve","ob","isNextNumber","resolveObj","nextProp","isNumber","coercion","match","prop","resolved","coercedValue","toArray","NaN","lib","resolveQuery","queryString","existingQuery","exec","preservePath","routeStr","preserveQuery","pageTitle","querySelector","textContent","routeParts","unmodifiedRoute","TypeError","callOnce","isDone","Router","pushState","Error","body","freeze","__paths__","extractParams","expr","pathRegex","RegExp","lastIndex","values","shift","ignoreCase","paths","indexOf","incomingRoute","toLowerCase","paramsLength","existingRouteIndex","splice","queryDeparam","noMatch","currentRoute","deepComparison","first","second","result","cache","deep"],"mappings":"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"}